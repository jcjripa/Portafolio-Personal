!function(root,factory){"function"==typeof define&&define.amd?define([],function(){return factory(root)}):"object"==typeof exports?module.exports=factory(root):root.SmoothScroll=factory(root)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(window){"use strict";var defaults={ignore:"[data-scroll-ignore]",header:null,topOnEmptyHash:!0,speed:500,speedAsDuration:!1,durationMax:null,durationMin:null,clip:!0,offset:0,easing:"easeInOutCubic",customEasing:null,updateURL:!0,popstate:!0,emitEvents:!0},supports=function(){return"querySelector"in document&&"addEventListener"in window&&"requestAnimationFrame"in window&&"closest"in window.Element.prototype},extend=function(){var merged={};return Array.prototype.forEach.call(arguments,function(obj){for(var key in obj){if(!obj.hasOwnProperty(key))return;merged[key]=obj[key]}}),merged},reduceMotion=function(settings){return!!("matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches)},getHeight=function(elem){return parseInt(window.getComputedStyle(elem).height,10)},escapeCharacters=function(id){"#"===id.charAt(0)&&(id=id.substr(1));for(var string=String(id),length=string.length,index=-1,codeUnit,result="",firstCodeUnit=string.charCodeAt(0);++index<length;){if(0===(codeUnit=string.charCodeAt(index)))throw new InvalidCharacterError("Invalid character: the input contains U+0000.");codeUnit>=1&&codeUnit<=31||127==codeUnit||0===index&&codeUnit>=48&&codeUnit<=57||1===index&&codeUnit>=48&&codeUnit<=57&&45===firstCodeUnit?result+="\\"+codeUnit.toString(16)+" ":result+=codeUnit>=128||45===codeUnit||95===codeUnit||codeUnit>=48&&codeUnit<=57||codeUnit>=65&&codeUnit<=90||codeUnit>=97&&codeUnit<=122?string.charAt(index):"\\"+string.charAt(index)}return"#"+result},easingPattern=function(settings,time){var pattern;return"easeInQuad"===settings.easing&&(pattern=time*time),"easeOutQuad"===settings.easing&&(pattern=time*(2-time)),"easeInOutQuad"===settings.easing&&(pattern=time<.5?2*time*time:(4-2*time)*time-1),"easeInCubic"===settings.easing&&(pattern=time*time*time),"easeOutCubic"===settings.easing&&(pattern=--time*time*time+1),"easeInOutCubic"===settings.easing&&(pattern=time<.5?4*time*time*time:(time-1)*(2*time-2)*(2*time-2)+1),"easeInQuart"===settings.easing&&(pattern=time*time*time*time),"easeOutQuart"===settings.easing&&(pattern=1- --time*time*time*time),"easeInOutQuart"===settings.easing&&(pattern=time<.5?8*time*time*time*time:1-8*--time*time*time*time),"easeInQuint"===settings.easing&&(pattern=time*time*time*time*time),"easeOutQuint"===settings.easing&&(pattern=1+--time*time*time*time*time),"easeInOutQuint"===settings.easing&&(pattern=time<.5?16*time*time*time*time*time:1+16*--time*time*time*time*time),settings.customEasing&&(pattern=settings.customEasing(time)),pattern||time},getDocumentHeight=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},getEndLocation=function(anchor,headerHeight,offset,clip){var location=0;if(anchor.offsetParent)do{location+=anchor.offsetTop,anchor=anchor.offsetParent}while(anchor);return location=Math.max(location-headerHeight-offset,0),clip&&(location=Math.min(location,getDocumentHeight()-window.innerHeight)),location},getHeaderHeight=function(header){return header?getHeight(header)+header.offsetTop:0},getSpeed=function(distance,settings){var speed=settings.speedAsDuration?settings.speed:Math.abs(distance/1e3*settings.speed);return settings.durationMax&&speed>settings.durationMax?settings.durationMax:settings.durationMin&&speed<settings.durationMin?settings.durationMin:parseInt(speed,10)},setHistory=function(options){if(history.replaceState&&options.updateURL&&!history.state){var hash=window.location.hash;hash=hash||"",history.replaceState({smoothScroll:JSON.stringify(options),anchor:hash||window.pageYOffset},document.title,hash||window.location.href)}},updateURL=function(anchor,isNum,options){isNum||history.pushState&&options.updateURL&&history.pushState({smoothScroll:JSON.stringify(options),anchor:anchor.id},document.title,anchor===document.documentElement?"#top":"#"+anchor.id)},adjustFocus=function(anchor,endLocation,isNum){0===anchor&&document.body.focus(),isNum||(anchor.focus(),document.activeElement!==anchor&&(anchor.setAttribute("tabindex","-1"),anchor.focus(),anchor.style.outline="none"),window.scrollTo(0,endLocation))},emitEvent=function(type,options,anchor,toggle){if(options.emitEvents&&"function"==typeof window.CustomEvent){var event=new CustomEvent(type,{bubbles:!0,detail:{anchor:anchor,toggle:toggle}});document.dispatchEvent(event)}},SmoothScroll;return function(selector,options){var smoothScroll={},settings,anchor,toggle,fixedHeader,eventTimeout,animationInterval;smoothScroll.cancelScroll=function(noEvent){cancelAnimationFrame(animationInterval),animationInterval=null,noEvent||emitEvent("scrollCancel",settings)},smoothScroll.animateScroll=function(anchor,toggle,options){smoothScroll.cancelScroll();var _settings=extend(settings||defaults,options||{}),isNum="[object Number]"===Object.prototype.toString.call(anchor),anchorElem=isNum||!anchor.tagName?null:anchor;if(isNum||anchorElem){var startLocation=window.pageYOffset;_settings.header&&!fixedHeader&&(fixedHeader=document.querySelector(_settings.header));var headerHeight=getHeaderHeight(fixedHeader),endLocation=isNum?anchor:getEndLocation(anchorElem,headerHeight,parseInt("function"==typeof _settings.offset?_settings.offset(anchor,toggle):_settings.offset,10),_settings.clip),distance=endLocation-startLocation,documentHeight=getDocumentHeight(),timeLapsed=0,speed=getSpeed(distance,_settings),start,percentage,position,stopAnimateScroll=function(position,endLocation){var currentLocation=window.pageYOffset;if(position==endLocation||currentLocation==endLocation||(startLocation<endLocation&&window.innerHeight+currentLocation)>=documentHeight)return smoothScroll.cancelScroll(!0),adjustFocus(anchor,endLocation,isNum),emitEvent("scrollStop",_settings,anchor,toggle),start=null,animationInterval=null,!0},loopAnimateScroll=function(timestamp){start||(start=timestamp),timeLapsed+=timestamp-start,position=startLocation+distance*easingPattern(_settings,percentage=(percentage=0===speed?0:timeLapsed/speed)>1?1:percentage),window.scrollTo(0,Math.floor(position)),stopAnimateScroll(position,endLocation)||(animationInterval=window.requestAnimationFrame(loopAnimateScroll),start=timestamp)};0===window.pageYOffset&&window.scrollTo(0,0),updateURL(anchor,isNum,_settings),emitEvent("scrollStart",_settings,anchor,toggle),smoothScroll.cancelScroll(!0),window.requestAnimationFrame(loopAnimateScroll)}};var clickHandler=function(event){if(!reduceMotion(settings)&&!event.defaultPrevented&&!(0!==event.button||event.metaKey||event.ctrlKey||event.shiftKey)&&"closest"in event.target&&(toggle=event.target.closest(selector))&&"a"===toggle.tagName.toLowerCase()&&!event.target.closest(settings.ignore)&&toggle.hostname===window.location.hostname&&toggle.pathname===window.location.pathname&&/#/.test(toggle.href)){var hash=escapeCharacters(toggle.hash),anchor;if("#"===hash){if(!settings.topOnEmptyHash)return;anchor=document.documentElement}else anchor=document.querySelector(hash);(anchor=anchor||"#top"!==hash?anchor:document.documentElement)&&(event.preventDefault(),setHistory(settings),smoothScroll.animateScroll(anchor,toggle))}},popstateHandler=function(event){if(null!==history.state&&history.state.smoothScroll&&history.state.smoothScroll===JSON.stringify(settings)){var anchor=history.state.anchor;"string"==typeof anchor&&anchor&&!(anchor=document.querySelector(escapeCharacters(history.state.anchor)))||smoothScroll.animateScroll(anchor,null,{updateURL:!1})}},init;return smoothScroll.destroy=function(){settings&&(document.removeEventListener("click",clickHandler,!1),window.removeEventListener("popstate",popstateHandler,!1),smoothScroll.cancelScroll(),settings=null,anchor=null,toggle=null,fixedHeader=null,eventTimeout=null,animationInterval=null)},function(){if(!supports())throw"Smooth Scroll: This browser does not support the required JavaScript methods and browser APIs.";smoothScroll.destroy(),settings=extend(defaults,options||{}),fixedHeader=settings.header?document.querySelector(settings.header):null,document.addEventListener("click",clickHandler,!1),settings.updateURL&&settings.popstate&&window.addEventListener("popstate",popstateHandler,!1)}(),smoothScroll}});